{
    "$id": "static/json-schema/GETsampleJSONSchema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "The Sample GET Response Schema",
    "description": "The schema for the GET response to retrieve an array of Samples",
    "base": "http://localhost:8080/api",
    "type": "object",
    "required": ["data", "meta"],
    "$comment": "A request is retrieved into three different parts. The data, links and the meta data.",

    "properties": {

        "data": {
            "$comment": "This is where the data of the request is found, containing an array of all of the Samples.",
            "type": "array",
            "description": "Each element is a Sample object, the number of elements can range from 1, for a specific query, or all instances in the database.",
            "items": {

                "required": ["id", "type", "attributes", "links"],
                "properties": {

                    "id": {
                        "$comment": "The id will be displayed here to the user instead of as an attribute.",
                        "type": "string",
                        "description": "Id reference to this Sample, generated by the application.",
                        "examples": ["1", "231"],
                        "pattern": "^(0|[1-9][0-9]*)$"
                    },

                    "type": {
                        "$comment": "The type of object the data will be returned.",
                        "const": "sample",
                        "description": "The type of the object of the data being returned."
                    },

                    "attributes": {
			          	"allOf": [
			          		{ "$ref": "definitions/sample.json" }
			          	]
                    },

                    "relationships": {
                        "$comment": "Contains all of the relationships that is possible with Sample objects.",
                        "type": "object",
                        "description": "Contains all of the relationships for a specific Sample.",
                        "properties": {
                        
                            "group": {
                                "$comment": "Group relationship links",
                                "type": "object",
                                "description": "The related API call links to retrieve the group for this specific Sample.",
                                "properties": {

                                    "links": {
                                        "properties": {
                                            
                                            "self": {
                                                "type": "string",
                                                "description": "URL link to this group relationship's info.",
                                                "examples": ["/api/sample/1/relationships/group"]
                                            },

                                            "related": {
                                                "type": "string",
                                                "description": "URL link to the specific group and all of it's properties.",
                                                "examples": ["/api/sample/1/group"]
                                            }

                                        }
                                    }

                                },
                                "links": [
                                    {
                                        "$comment": "Self link configuration for documentation purposes.",
                                        "rel": "self",
                                        "href": "/sample/{sample_id}/relationships/group",
                                        "templateRequired": ["sample_id"],
                                        "templatePointers": {"sample_id": "/data/item/id"}
                                    },
                                    {
                                        "$comment": "Related link configuration for documentation purposes.",
                                        "rel": "related",
                                        "href": "/sample/{sample_id}/group",
                                        "templateRequired": ["sample_id"],
                                        "templatePointers": {"sample_id": "/data/item/id"},
                                        "targetHints": {
                                            "allow": ["GET", "PATCH", "DELETE"],
                                            "accept-patch": ["application/vnd.api+json"]
                                        },
                                        "targetSchema": {
                                            "$ref": "https://localhost:8080/api/schema/group"
                                        }
                                    }
                                ]
                            },
                            
                            "protocol": {
                                "$comment": "Protocol relationship links",
                                "type": "object",
                                "description": "The related API call links to retrieve the protocol for this specific Sample.",
                                "properties": {

                                    "links": {
                                        "properties": {
                                            
                                            "self": {
                                                "type": "string",
                                                "description": "URL link to this protocol relationship's info.",
                                                "examples": ["/api/sample/1/relationships/protocol"]
                                            },

                                            "related": {
                                                "type": "string",
                                                "description": "URL link to the specific protocol and all of it's properties.",
                                                "examples": ["/api/sample/1/protocol"]
                                            }

                                        }
                                    }

                                },
                                "links": [
                                    {
                                        "$comment": "Self link configuration for documentation purposes.",
                                        "rel": "self",
                                        "href": "/sample/{sample_id}/relationships/protocol",
                                        "templateRequired": ["sample_id"],
                                        "templatePointers": {"sample_id": "/data/item/id"}
                                    },
                                    {
                                        "$comment": "Related link configuration for documentation purposes.",
                                        "rel": "related",
                                        "href": "/sample/{sample_id}/protocol",
                                        "templateRequired": ["sample_id"],
                                        "templatePointers": {"sample_id": "/data/item/id"},
                                        "targetHints": {
                                            "allow": ["GET", "PATCH", "DELETE"],
                                            "accept-patch": ["application/vnd.api+json"]
                                        },
                                        "targetSchema": {
                                            "$ref": "https://localhost:8080/api/schema/protocol"
                                        }
                                    }
                                ]
                            },
                            
                            "kit": {
                                "$comment": "Product kit relationship links",
                                "type": "object",
                                "description": "The related API call links to retrieve the kit for this specific Sample.",
                                "properties": {

                                    "links": {
                                        "properties": {
                                            
                                            "self": {
                                                "type": "string",
                                                "description": "URL link to this kit relationship's info.",
                                                "examples": ["/api/sample/1/relationships/kit"]
                                            },

                                            "related": {
                                                "type": "string",
                                                "description": "URL link to the specific kit and all of it's properties.",
                                                "examples": ["/api/sample/1/kit"]
                                            }

                                        }
                                    }

                                },
                                "links": [
                                    {
                                        "$comment": "Self link configuration for documentation purposes.",
                                        "rel": "self",
                                        "href": "/sample/{sample_id}/relationships/kit",
                                        "templateRequired": ["sample_id"],
                                        "templatePointers": {"sample_id": "/data/item/id"}
                                    },
                                    {
                                        "$comment": "Related link configuration for documentation purposes.",
                                        "rel": "related",
                                        "href": "/sample/{sample_id}/kit",
                                        "templateRequired": ["sample_id"],
                                        "templatePointers": {"sample_id": "/data/item/id"},
                                        "targetHints": {
                                            "allow": ["GET", "PATCH", "DELETE"],
                                            "accept-patch": ["application/vnd.api+json"]
                                        },
                                        "targetSchema": {
                                            "$ref": "https://localhost:8080/api/schema/kit"
                                        }
                                    }
                                ]
                            }

                        }
                    },

                    "links": {
                        "$comment": "For each Sample, a set of links will be generated to see how you can access this object.",
                        "type": "object",
                        "description": "The link to this specific Sample object.",
                        "properties": {

                            "self": {
                                "type": "string",
                                "description": "The URL to retrieve all of the information for a specific Sample given the database id. ",
                                "examples": ["/api/sample/1"]
                            }

                        }
                    }

                },

                "links": [{
                    "$comment": "This is where the links are generated for each Sample object.",
                    "rel": "item",
                    "href": "/sample/{sample_id}",
                    "templateRequired": ["sample_id"],
                    "templatePointers": {"sample_id": "/data/item/id"},
                    "targetHints": {
                        "allow": ["GET", "PATCH", "DELETE"],
                        "accept-patch": ["application/vnd.api+json"]
                    }
                }]

            }
        },

        "links": {
            "$comment": "Links for actions that can be done to the list of Samples that are retrieved.",
            "type":"object",
            "properties": {
                "first": {
                    "type":"string",
                    "description": "URL link to the first page of results",
                    "examples": ["/api/sample?page[limit]=20"]
                },
                "last":{
                    "type":"string",
                    "description": "URL link to the last page of results",
                    "examples": ["/api/sample?page[limit]=20"]
                },
                "next":{
                    "type":"string",
                    "description": "URL link to the next page of results",
                    "examples": ["/api/sample?page[limit]=20&page[offset]=20"]
                },
                "prev":{
                    "type":"string",
                    "description": "URL link to the next page of results",
                    "examples": ["/api/sample?page[limit]=20&page[offset]=20"]
                }
            }
        },

        "meta": {
            "$comment": "Metadata that comes along with the request.",
            "properties": {

                "totalResourceCount": {
                    "type": "integer",
                    "description": "Meta info describing how many elements are in the data array returned."
                }

            }
        }
        
    },

    "links": [
        {
            "title": "link to the first pagination section",
            "rel": "first",
            "href": "{firstPageLink}",
            "templateRequired": ["firstPageLink"],
            "templatePointers": { "firstPageLink":"/links/first"}
        },
        {
            "title": "link to the last pagination section",
            "rel": "last",
            "href": "{lastPageLink}",
            "templateRequired": ["lastPageLink"],
            "templatePointers": { "lastPageLink":"/links/last"}
        },
        {
            "title": "link to the next pagination section",
            "rel": "next",
            "href": "{nextPageLink}",
            "templateRequired": ["nextPageLink"],
            "templatePointers": { "nextPageLink":"/links/next"}
        },
        {
            "title": "link to the prev pagination section",
            "rel": "prev",
            "href": "{prevPageLink}",
            "templateRequired": ["prevPageLink"],
            "templatePointers": { "prevPageLink":"/links/prev"}
        }
    ]
}